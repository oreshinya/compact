(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
var compact = {};

var utils = require("./utils.js"),
    core = require("./core.js"),
    finder = require("./finder.js"),
    writer = require("./writer.js");

utils.extend(compact, core);
utils.extend(compact, finder);
utils.extend(compact, writer);

module.exports = compact;

},{"./core.js":2,"./finder.js":3,"./utils.js":5,"./writer.js":6}],2:[function(require,module,exports){
var instance = require("./instance.js"),
    utils = require("./utils.js");

module.exports = {

  _records: {},

  _storageKey: null,

  _createInit: function(instanceMethods) {
    var _records = this._records;

    var fn = function(attributes) {
      var inst = Object.create(instance);
      inst._records = _records;

      utils.extend(inst, attributes);
      if ( instanceMethods ) {
        utils.extend(inst, instanceMethods);
      }

      return inst;
    };

    return fn;
  },

  extend: function(storageKey, instanceMethods) {
    if ( !storageKey ) {
      throw("storageKey should not be null, undefined");
    }

    var model = Object.create(this);
    model._storageKey = storageKey;
    model.init = this._createInit(instanceMethods);
    return model;
  }

};

},{"./instance.js":4,"./utils.js":5}],3:[function(require,module,exports){
module.exports = {

  all: function() {
    var instances = [],
        id,
        inst;

    for ( id in this._records ) {
      inst = this.init(this._records[id]);
      instances.push(inst);
    }

    return instances;
  },

  find: function(id) {
    var attrs = this._records[id];
    if ( !attrs ) {
      return null;
    }

    return this.init(attrs);
  }

};

},{}],4:[function(require,module,exports){
var  utils = require("./utils.js");

module.exports = {

  _records: null,

  save: function() {
    if ( this.id )
    var attrs = this.attributes();
    this._records[this.id] = attrs;
  },

  destroy: function() {
    delete this._records[this.id];
  },

  attributes: function() {
    var attrs = {},
        key;

    for ( key in this ) {

      if ( this.isAttribute(key) ) {
        attrs[key] = this[key];
      }

    }

    return attrs;
  },

  isAttribute: function(key) {
    var isRecords = ( key === "_records" ),
        isFunction = utils.is("Function", this[key]);

    return !isId && !isRecords && !isFunction;
  }

};

},{"./utils.js":5}],5:[function(require,module,exports){
module.exports = {

  extend: function(to, from) {
    var key;
    for ( key in from ) {
      to[key] = from[key];
    }
  },

  is: function(type, obj) {
    var klass = Object.prototype
                      .toString
                      .call(obj)
                      .slice(8, -1);

    return obj && (klass === type);
  }

};

},{}],6:[function(require,module,exports){
module.exports = {

  save: function(values) {
    var i = 0, val;

    for ( ; i < values.length; i++ ) {
      val = values[i];

      if ( !val.id ) {
        return false;
      }

      this._records[val.id] = val;
    }

    return true;
  },

  destroy: function() {
    this._records = {};
  }

};

},{}]},{},[1,2,3,4,5,6])